<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>MiniApp Manifest</title>
    <link rel="stylesheet" href="./local.css" />

    <style>
    .two-cols {
      display: grid;
      grid-template-columns: 1fr 1fr;
    }

    table.members {
      border: 1px #f0f0f0 solid;
      margin-bottom: 1em;
      width: 100%;
    }
    table.members th:nth-child(1),
    table.members td:nth-child(1) {
      width: 11rem;  
    }

    table.members th:nth-child(2),
    table.members td:nth-child(2) {
      width: 5rem;  
    }
    table.members thead tr,
    table.members tr:nth-child(even) {
      background-color: #f0f0f0;
    }
    td, th {
      padding:2px 15px;
    }
    </style>

    <script async class="remove" src="https://www.w3.org/Tools/respec/respec-w3c"></script>
    <script defer src="https://w3c.github.io/miniapp/specs/script.js"></script>

    <script class="remove">
        var respecConfig = {
            specStatus: "ED",
            copyrightStart: "2021",
            edDraftURI: "https://w3c.github.io/miniapp-manifest/",

            shortName: "miniapp-manifest",

            editors: [{
                name: "Martin Alvarez-Espinar",
                companyURL: "http://www.huawei.com/",
                company: "Huawei"
              }, {
               name: "Yongjing Zhang",
                companyURL: "http://www.huawei.com/",
                company: "Huawei"
              }],

             formerEditors: [{
                name: "Shouren Lan",
                companyURL: "http://www.huawei.com/",
                company: "Huawei"
              }, {
                name: "Zhiqiang Yu",
                companyURL: "http://www.huawei.com/",
                company: "Huawei"
              }, {
                name: "Xiaofeng Zhang",
                companyURL: "http://www.huawei.com/",
                company: "Huawei"
              }],

            group: "wg/miniapps",
            github: {
              repoURL: "https://github.com/w3c/miniapp-manifest",
              branch: "main",
            },
            localBiblio:  {
              "SEMANTIC-VERSIONING": {
                title: 'Semantic Versioning',
                href: 'https://semver.org/'
              },
              "MINIAPP-LIFECYCLE": {
                  title: "MiniApp Lifecycle",
                  href: "https://w3c.github.io/miniapp-lifecycle/"
              },
              "MINIAPP-PACKAGING": {
                  title: "MiniApp Packaging",
                  href: "https://w3c.github.io/miniapp-packaging/"
              },
            },
            a11y: true,            
        };
    </script>
</head>

<body data-cite="APPMANIFEST MINIAPP-PACKAGING MANIFEST-APP-INFO INFRA URL">
  <section id='abstract'>
    <p>
      This specification is a registry of supplementary members for the <a href="https://www.w3.org/TR/appmanifest/">Web Application Manifest</a> and the <a href="https://www.w3.org/TR/manifest-app-info/">Web App Manifest - Application Information</a> specifications that provide additional metadata to an application manifest to describe <a href="https://w3c.github.io/miniapp-packaging/#dfn-miniapp" data-link-type="dfn">MiniApps</a>. This JSON-based manifest file enables developers to set up basic information, window style, page route, and other information of a MiniApp. The manifest also includes information about the window style like the navigation bar, title, window background color, page routing information, and the widgets that are part of a MiniApp.
    </p>
  </section>

  <section id='sotd'>
    <!--p id="langSwitch">
      <button onclick="switchLang('zh-hans')" lang="zh-hans">简体中文</button>
      <button onclick="switchLang('en')" lang="en">English</button>
      <button onclick="switchLang('all')" lang="en">All</button>
    </p-->
  </section>
  
  <section>
    <h2>MiniApp Manifest</h2>
    <p>
      A <dfn data-lt="MiniApp manifest's|manifest">MiniApp manifest</dfn> is a [[JSON]] document that extends and profiles the Web App Manifest [[APPMANIFEST]] and the Web App Manifest - Application Information [[MANIFEST-APP-INFO]], to describe metadata associated with a MiniApp.
    </p>
    <section id="manifest-conformance" data-cite="IMAGE-RESOURCE">
      <h3>Conformance</h3>
      <p>
        A [=MiniApp manifest=] MUST contain the following members at its root:
      </p>
      <ul>
        <li>
          <a><code>app_id</code></a>
        </li>
        <li>
          <a><code>icons</code></a>
        </li>
        <li>
          <a data-link-for="MiniApp manifest" data-link-type="dfn"><code>name</code></a>
        </li>
        <li>
          <a><code>version_name</code></a>
        </li>  
        <li>
          <a><code>version_code</code></a>
        </li>
        <li>
          <a data-link-for="MiniApp manifest" data-link-type="dfn"><code>min_platform_version</code></a>
        </li>
        <li>
          <a><code>pages</code></a>
        </li>
      </ul>
      <p>
          Each [=image resource=] object within the [=MiniApp manifest's=] <a><code>icons</code></a> member MUST contain:
      </p>
      <ul>
        <li>
          <a href="https://www.w3.org/TR/image-resource/#dfn-src" data-type="dfn" data-link-type="dfn"><code>src</code></a>
        </li>
      </ul>
      <p>
        A [=MiniApp manifest=] MAY contain a <a><code>widgets</code></a> member at its root. This member MUST contain an [=array=] of <a>MiniApp widget resources</a>. Each [=MiniApp widget resource=] object MUST contain the following members:
      </p>
      <ul>
        <li>
         <a data-link-for="MiniApp widget resource" data-link-type="dfn"><code>name</code></a>
        </li>
        <li>
         <a><code>path</code></a>
        </li>
      </ul>
      <p>
        A [=MiniApp manifest=] MAY contain a <a><code>req_permissions</code></a> member at its root. This member MUST contain an [=array=] of <a>MiniApp permission resources</a>. Each [=MiniApp permission resource=] object MUST contain the following member:
      </p>
      <ul>
        <li>
         <a data-link-for="MiniApp permission resource" data-link-type="dfn"><code>name</code></a>
        </li>
      </ul>
      <p>The presence of other <a href="#manifest-members">members</a> in a [=MiniApp manifest=] is optional, but vendor-specific extensions MAY modify this.</p>
      <p>
        As the [=application manifest=] is JSON, this specification relies on the [[JSON]] specification. This specification includes members typed as <dfn>number</dfn>, <dfn>boolean</dfn> literals, <dfn>object</dfn>,
        <dfn>array</dfn>, and <dfn>string</dfn>.
      </p>      
    </section>

    <section data-cite="IMAGE-RESOURCE">
      <h3>Summary of Members</h3>
      <p>
        The following table shows a summary of the [=MiniApp manifest's=] members:
      </p>
      <table class="members">
        <caption>Members at root</caption>
        <thead>
          <tr>
            <th scope="col">Member</th>
            <th scope="col">Type</th>
            <th scope="col">Required</th>
            <th scope="col">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row"><a><code>app_id</code></a></th>
            <td> [=string=] </td>
            <td>Yes</td>
            <td>
              <span>Identifier</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>description</code></a></th>
            <td> [=string=] </td>
            <td>No</td>
            <td>
              <span>Description</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>dir</code></a></th>
            <td> [=string=] </td>
            <td>No</td>
            <td>
              <span>Direction of texts</span>
            </td>
          </tr>
          <tr data-cite="IMAGE-RESOURCE">
            <th scope="row"><a><code>icons</code></a></th>
            <td> [=image resource=] [=array=] </td>
            <td>Yes</td>
            <td>
              <span>MiniApp icons</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>lang</code></a></th>
            <td> [=string=] </td>
            <td>No</td>
            <td>
              <span>Primary language</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a data-link-for="MiniApp manifest" data-link-type="dfn"><code>min_platform_version</code></a></th>
            <td> [=string=] </td>
            <td>Yes</td>
            <td>
              <span>Minimum platform version supported</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a data-link-for="MiniApp manifest" data-link-type="dfn"><code>name</code></a></th>
            <td> [=string=] </td>
            <td>Yes</td>
            <td>
              <span>App name</span>
            </td>
          </tr>          
          <tr>
            <th scope="row"><a><code>pages</code></a></th>
            <td> [=array=] </td>
            <td>Yes</td>
            <td>
              <span>Page routing information</span>
            </td>
          </tr>
          <tr>
              <th scope="row"><a><code>req_permissions</code></a></th>              
              <td> <a>permission resource</a> [=array=] </td>
              <td>No</td>
              <td> <span>Required permissions</span></td>
          </tr>          
          <tr>
            <th scope="row"><a><code>short_name</code></a></th>
            <td> [=string=] </td>
            <td>No</td>
            <td>
              <span>MiniApp short name</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>version_code</code></a></th>
            <td> [=string=] </td>
            <td>Yes</td>
            <td>
              <span>Version code</span>
            </td>
          </tr>          
          <tr>
            <th scope="row"><a><code>version_name</code></a></th>
            <td> [=string=] </td>
            <td>Yes</td>
            <td>
              <span>Version name</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>widgets</code></a></th>
            <td> <a>widget resource</a> [=array=] </td>
            <td>No</td>
            <td> <span>Widgets</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>window</code></a></th>
            <td> <a>window resource</a> </td>
            <td>No</td>
            <td>
              <span>Window style</span>
            </td>
          </tr>
        </tbody>
      </table>

      <table class="members">
        <caption>Members of [=image resource=] objects<br/>(<a><code>icons</code></a> array)</caption>
        <thead>
          <tr>
            <th scope="col">Member</th>
            <th scope="col">Type</th>
            <th scope="col">Required</th>
            <th scope="col">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row"><a href="https://www.w3.org/TR/image-resource/#dfn-src" data-type="dfn" data-link-type="dfn"><code>src</code></a></th>
            <td> [=string=] </td>
            <td>Yes</td>
            <td>
              <span>Source of the icon</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a href="https://www.w3.org/TR/image-resource/#dfn-sizes" data-type="dfn" data-link-type="dfn"><code>sizes</code></a></th>
            <td> [=string=] </td>
            <td>No</td>
            <td>
              <span>Resolution sizes of the icon</span>
            </td>
          </tr>
        </tbody>
      </table>

      <table class="members">
        <caption>Members of [=permission resource=] objects<br/>(<a><code>req_permissions</code></a> array)</caption>
        <thead>
          <tr>
            <th scope="col">Member</th>
            <th scope="col">Type</th>
            <th scope="col">Required</th>
            <th scope="col">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row"><a data-link-for="MiniApp permission resource" data-link-type="dfn"><code>name</code></a></th>
            <td> [=string=] </td>
            <td>Yes</td>
            <td>
                <span>Permission name</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>reason</code></a></th>
            <td> [=string=] </td>
            <td>No</td>
            <td>
                <span>Reason to request the permission</span>
            </td>
          </tr>          
        </tbody>
      </table>

      <table class="members">
        <caption>Members of [=widget resource=] objects<br/>(<a><code>widgets</code></a> array)</caption>
        <thead>
          <tr>
            <th scope="col">Member</th>
            <th scope="col">Type</th>
            <th scope="col">Required</th>
            <th scope="col">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row"><a data-link-for="MiniApp widget resource" data-link-type="dfn"><code>name</code></a></th>
            <td> [=string=] </td>
            <td>Yes</td>
            <td>
              <span>Widget name</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>path</code></a></th>
            <td> [=string=] </td>
            <td>Yes</td>
            <td>
              <span>Widget path</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a data-link-for="MiniApp widget resource" data-link-type="dfn"><code>min_platform_version</code></a></th>
            <td> [=string=] </td>
            <td>No</td>
            <td>
              <span>Minimum platform version supported</span>
            </td>
          </tr>
        </tbody>
      </table>

      <table class="members">
        <caption>Members of [=window resource=] objects<br/>(<a><code>window</code></a> object)</caption>
        <thead>
          <tr>
            <th scope="col">Member</th>
            <th scope="col">Type</th>
            <th scope="col">Required</th>
            <th scope="col">Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row"><a><code>auto_design_width</code></a></th>
            <td> [=boolean=]  </td>
            <td>No</td>
            <td>
                <span>Enables/disables auto-calculation of page's <a><code>design_width</code></a> </span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a data-link-for="MiniApp window resource" data-link-type="dfn"><code>background_color</code></a></th>
            <td> [=string=] </td>
            <td>No</td>
            <td>
              <span>Window background color</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>background_text_style</code></a></th>
            <td> [=string=] </td>
            <td>No</td>
            <td>
              <span>Background text style</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>design_width</code></a></th>
            <td> [=number=]  </td>
            <td>No</td>
            <td>
                <span>The baseline page design width</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>enable_pull_down_refresh</code></a></th>
            <td> [=boolean=] </td>
            <td>No</td>
            <td>
              <span>Enable pull-to-refresh event</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>fullscreen</code></a></th>
            <td> [=boolean=]  </td>
            <td>No</td>
            <td>
              <span>Full screen display</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>navigation_bar_background_color</code></a></th>
            <td> [=string=] </td>
            <td>No</td>
            <td>
              <span>Navigation bar background color</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>navigation_bar_text_style</code></a></th>
            <td> [=string=]  </td>
            <td>No</td>
            <td>
              <span>Text style of the navigation bar</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>navigation_bar_title_text</code></a></th>
            <td> [=string=]  </td>
            <td>No</td>
            <td>
              <span>Navigation bar title</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>navigation_style</code></a></th>
            <td> [=string=] </td>
            <td>No</td>
            <td>
              <span>Navigation bar style</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>on_reach_bottom_distance</code></a></th>
            <td> [=number=] </td>
            <td>No</td>
            <td>
              <span>Distance for pull-up bottom event triggering</span>
            </td>
          </tr>
          <tr>
            <th scope="row"><a><code>orientation</code></a></th>
            <td> [=string=]  </td>
            <td>No</td>
            <td>
              <span>Screen orientation settings</span>
            </td>
          </tr>
        </tbody>
      </table>

      <p class="note">
      Other [=application manifest=] members such as <a href="https://www.w3.org/TR/appmanifest/#scope-member"><code>scope</code></a>,
        <a href="https://www.w3.org/TR/appmanifest/#theme_color-member"><code>theme_color</code></a>,
        <a href="https://www.w3.org/TR/appmanifest/#related_applications-member"><code>related_applications</code></a>,
        <a href="https://www.w3.org/TR/appmanifest/#prefer_related_applications-member"><code>prefer_related_applications</code></a>, and
        <a href="https://www.w3.org/TR/appmanifest/#shortcuts-member"><code>shortcuts</code></a> are not currently supported by MiniApp user agents.
      </p>
    </section>
  </section>
  <section id="manifest-members">
    <h2>
      <span>MiniApp Manifest members</span>
    </h2>
    <section id='webappmanifest-members'>
      <h2>Members inherited from the Web Application Manifest</h2>
      <p>The [=MiniApp manifest=] uses the following essential [=application manifest=]'s members.</p>      
      <section>
        <h3><code>dir</code> member</h3>
        <p>
          The [=MiniApp manifest's=] <dfn><code>dir</code></dfn> member, while specifying the base direction of the <a>localizable members</a> of the [=manifest=], also specifies
          the default base text direction of the whole MiniApp.</p> 
        <p>The <a><code>dir</code></a> member's value can be set to one of the <a href="https://www.w3.org/TR/appmanifest/#dfn-text-direction-value">text-direction values</a> as specified in [[APPMANIFEST]]. The text-direction values are the following:</p>
        <dl>
          <dt><a href="https://w3c.github.io/miniapp-packaging/#dfn-ltr" data-type="dfn" data-link-type="dfn"><code>"ltr"</code></a></dt>
          <dd>Left-to-right text.</dd>
          <dt><a href="https://w3c.github.io/miniapp-packaging/#dfn-rtl" data-type="dfn" data-link-type="dfn"><code>"rtl"</code></a></dt>
          <dd>Right-to-left text.</dd>
          <dt><a href="https://w3c.github.io/miniapp-packaging/#dfn-auto" data-type="dfn" data-link-type="dfn"><code>"auto"</code></a> (default)</dt>
          <dd>No explicit directionality.</dd>
        </dl>
        <p>This member will be processed according to the <a href="https://w3c.github.io/manifest/#dfn-process-the-dir-member" data-link-type="dfn">process the <code>dir</code> member</a> algorithm specified in [[APPMANIFEST]].</p>
        <p class="note" title='Usage'>
          Value by default: <code>"auto"</code>.
        </p>        
      </section>
      <section data-cite="IMAGE-RESOURCE HTML">
        <h3>
          <span><code>icons</code> member</span>
        </h3>
        <p>
          The [=MiniApp manifest's=] <dfn><code>icons</code></dfn> member describes images that serve as iconic representations of MiniApps. This member is an [=array=] of [=image resource=] objects.
        </p>
        <p>As specified in [[IMAGE-RESOURCE]], an [=image resource=] consists of:</p>
        <dl>
        <dt>
          <dt><a href="https://www.w3.org/TR/image-resource/#dfn-src" data-type="dfn" data-link-type="dfn"><code>src</code></a></dt>
          <dd>A <a data-link-type="dfn" data-type="dfn" href="https://url.spec.whatwg.org/#concept-url">URL</a> from where to obtain the image data.</dd>
          <dt><a href="https://www.w3.org/TR/image-resource/#dfn-sizes" data-type="dfn" data-link-type="dfn"><code>sizes</code></a></dt>
          <dd>
            An optional [=string=] representing the sizes of the image, expressed using the same syntax as [^link^]'s [^link/sizes^] attribute.
          </dd>
          <!--
          <dt><a href="https://www.w3.org/TR/image-resource/#dfn-type" data-link-type="dfn">type</a></dt>
          <dd>
            An optional [=image MIME type=].
          </dd>
          <dt><a href="https://www.w3.org/TR/image-resource/#dfn-label" data-link-type="dfn">label</a></dt>
          <dd>
            A [=string=] representing the accessible name of the image.
          </dd>
          -->
        </dl>
        <p>This member will be processed according to the <a href="https://w3c.github.io/manifest/#process-image-resources" data-link-type="dfn">process image resources</a> algorithm specified in [[APPMANIFEST]].</p>
      </section>      
      <section>
        <h3>
          <span><code>lang</code> member</span>
        </h3>
        <p>
          The [=MiniApp manifest's=] <dfn><code>lang</code></dfn> member, while specifying the primary language of the <a>localizable members</a>, also specifies
          the primary language of the whole MiniApp. This member is a [=string=] in the form of a <a href="https://w3c.github.io/manifest/#dfn-language-tag" data-link-type="dfn">language tag</a>, a string that matches the production of a Language-Tag [[BCP47]], as defined in [[APPMANIFEST]].
        </p>
        <p>This member will be processed according to the <a href="https://w3c.github.io/manifest/#dfn-process-the-lang-member" data-link-type="dfn">process the <code>lang</code> member</a> algorithm specified in [[APPMANIFEST]].</p>
      </section>
      <section>
        <h3>
          <span><code>name</code> member</span>
        </h3>
        <p>
          The [=MiniApp manifest's=] <dfn data-dfn-for="MiniApp manifest"><code>name</code></dfn> member is the descriptive name of the application. This is the name directly displayed to the user. It is used as the display name of MiniApp along with the desktop icon and in the context of MiniApp management. 
        </p>
        <p>This member will be processed according to the <a href="https://w3c.github.io/manifest/#dfn-process-a-text-member" data-link-type="dfn">process a text member</a> algorithm specified in [[APPMANIFEST]].</p>
      </section>
      <section>
        <h3>
          <span><code>short_name</code> member</span>
        </h3>
        <p>
          The [=MiniApp manifest's=] <dfn><code>short_name</code></dfn> member provides a concise and easy-to-read name for a MiniApp. It can be used when there is insufficient space to display the full MiniApp name provided in <a data-link-for="MiniApp manifest" data-link-type="dfn"><code>name</code></a>.
        </p>
        <p>This member will be processed according to the <a href="https://w3c.github.io/manifest/#dfn-process-a-text-member" data-link-type="dfn">process a text member</a> algorithm specified in [[APPMANIFEST]].</p>
      </section>
    </section>

    <section id='webappmanifest-app-info-members' data-cite='MANIFEST-APP-INFO'>
      <h2>Member inherited from Application Information</h2>
      <p>
        The following member is defined in the Web App Manifest - Application Information specification [[MANIFEST-APP-INFO]].
      </p>
      <section>
        <h3>
          <span><code>description</code> member</span>
        </h3>
        <p>
          The [=MiniApp manifest's=] <dfn><code>description</code></dfn> member provides a textual description for the MiniApp representing the purpose of the web application in natural language, as defined in [[MANIFEST-APP-INFO]]
        </p>
        <p>This member will be processed according to the <a href="https://w3c.github.io/manifest/#dfn-process-a-text-member" data-link-type="dfn">process a text member</a> algorithm specified in [[APPMANIFEST]].</p>        
      </section>
    </section>
    
    <section id='supplementary-manifest-members' data-cite="MINIAPP-PACKAGING">
      <h2>Supplementary manifest members</h2>
      <p>
        The following members are defined under the scope of the [=MiniApp manifest=], addressing specific aspects of MiniApp.
      </p>
      <section>
        <h3>
          <span><code>app_id</code> member</span>
        </h3>
        <p>
          The [=MiniApp manifest's=] <dfn><code>app_id</code></dfn> member is a [=string=] that identifies the MiniApp univocally. This member is mainly used for package management, and it supports the update and release process of MiniApp versioning.
        </p>
        <p>
          The format of <a><code>app_id</code></a> MUST be a [=string=] defined by the following rule:
        </p>
        <pre class="abnf">
          app_idrule = ALPHA 1*( ALPHA / DIGIT / "_" / "." )
        </pre>
        <p class="note" title='Usage'>
             One common practice is to use the reverse-domain-name-like convention (e.g., <code>org.example.miniapp</code>).
        </p>
      </section>
      <section>
        <h3>
          <span><code>min_platform_version</code> member</span>
        </h3>
        <p>
          The [=MiniApp manifest's=] <dfn data-dfn-for="MiniApp manifest"><code>min_platform_version</code></dfn> member is a [=string=] that indicates the minimum supported version of the MiniApp user agent's platform to ensure the regular operation of a MiniApp (e.g., <code>"1.0.0"</code>).
        </p>
        <p class="note" title='Usage'>
          The RECOMMENDED format for this member is <code>"X.Y.Z"</code>, where <code>X</code>, <code>Y</code>, and <code>Z</code> are non-negative integer values (e.g., <samp>"1.10.0"</samp>), as specified in <cite>Semantic Versioning</cite> [[SEMANTIC-VERSIONING]].
        </p>        
      </section>
      <section>
        <h3>
          <span><code>pages</code> member</span>
        </h3>
        <p>
            The [=MiniApp manifest's=] <dfn><code>pages</code></dfn> member is an [=array=] of [=relative-url string=] used for specifying the collection of pages that are part of a MiniApp. Each item in the array represents a [=page route=].
        </p> 
        <p>
          A <dfn data-lt="page route|page routes">MiniApp page route</dfn> is the relative path and filename of a MiniApp Page.
        </p> 
        <p>
          During the MiniApp development process, adding or deleting MiniApp pages is done by configuring the array. When configuring the [=page routes=], the file name extension MAY be omitted (e.g., <samp>/component/mypage</samp>).
        </p>
        <div class="note" title="Usage">
          <p>
            The first item in the <a><code>pages</code></a> array defines the homepage of a MiniApp.
          </p>
          <p>
            For compatibility with the Web platform, it is RECOMMENDED to use <a><code>pages</code></a> along with the Web application manifest's <a href="https://www.w3.org/TR/appmanifest/#start_url-member" data-link-type="dfn"><code>start_url</code></a> and <a href="https://www.w3.org/TR/appmanifest/#scope-member" data-link-type="dfn"><code>scope</code></a> members. These members will be set with the following values:
          </p>
          <ul>
            <li><a href="https://www.w3.org/TR/appmanifest/#start_url-member" data-link-type="dfn">start_url</a> SHOULD be set with the same value of the first item in the <a><code>pages</code></a> member; and</li>
            <li><a href="https://www.w3.org/TR/appmanifest/#scope-member" data-link-type="dfn">scope</a> SHOULD be set with the value <code>"."</code>.</li>
          </ul>
        </div>
      </section>      
      <section>
        <h3>
          <span><code>req_permissions</code> member</span>
        </h3>
        <p>
            The [=MiniApp manifest's=] <dfn><code>req_permissions</code></dfn> member is an [=array=] of [=MiniApp permission resources=] objects.
        </p> 
        <p> 
          Each <a>MiniApp permission resource</a> declares a request for using a concrete system feature (e.g., access to device's location, user contacts, sensors, and camera) required for the proper execution of the MiniApp.
        </p>
        <p>
          User agents will ask for the user's consent to protect their privacy during access to these specific features. This information in the <a><code>req_permissions</code></a> member may be used by app stores or hosting platforms to filter MiniApps according to the user's preferences, privacy policy, or device capabilities. 
        </p>
      </section>      
      <section>
        <h3>
          <span><code>version_name</code> member</span>
        </h3>
        <p>
          The [=MiniApp manifest's=] <dfn><code>version_name</code></dfn> member is a [=string=] mainly used for describing information on the version of a MiniApp, playing an essential role in version control, MiniApp application, and platform compatibility. It is usually considered as the version that is shown publicly and displayed to the user.
        </p>
        <p class="note" title='Usage'>
          The RECOMMENDED format for this member is <code>X.Y.Z</code>, where <code>X</code>, <code>Y</code>, and <code>Z</code> are non-negative integer values (e.g., <samp>1.10.0</samp>), as specified in <cite>Semantic Versioning</cite> [[SEMANTIC-VERSIONING]].
        </p>
      </section>
      <section>
        <h3>
          <span><code>version_code</code> member</span>
        </h3>
        <p>
          The [=MiniApp manifest's=] <dfn><code>version_code</code></dfn> member is a non-negative integer [=number=] that represents the version of a MiniApp. It is mainly used for enhancing the maintainability and security of MiniApp (e.g., compatibility among incremental versions). The <a><code>version_code</code></a> member aims at supporting the development and deployment process, and it is not usually displayed to the end-user.
        </p>
        <div class="note" title='Usage'>
          <p>
            The value of this member is usually incremented according to the version iteration process.
          </p>
          <p>
            Value by default: <code>1</code>.
          </p>
        </div>
      </section>
      <section>
        <h3>
          <span><code>widgets</code> member</span>
        </h3>
        <p>
            The [=MiniApp manifest's=] <dfn><code>widgets</code></dfn> member defines a set of widgets that are a part of a MiniApp.
        </p>
        <p>
            A <a data-link-type="dfn" href="https://w3c.github.io/miniapp-packaging/#dfn-package">MiniApp Package</a> MAY include MiniApp Pages and Widgets concurrently.
        </p> 
        <p>
           A widget, as part of a MiniApp, share some of the members of the [=MiniApp manifest=], including:
        </p> 
        <ul>
          <li><a><code>dir</code></a>;</li>
          <li><a><code>lang</code></a>;</li>
          <li><a><code>app_id</code></a>;</li>
          <li><a data-link-for="MiniApp manifest" data-link-type="dfn"><code>name</code></a>;</li>
          <li><a><code>short_name</code></a>;</li>
          <li><a><code>icons</code></a>;</li>
          <li><a><code>version_name</code></a>; and</li>
          <li><a><code>version_code</code></a></li>
        </ul>
        <p>
          However, a widget also has its exclusive fields as defined in the <a>MiniApp widget resource</a>.</p>
        </p>
      </section>      
      <section>
        <h3>
          <span><code>window</code> member</span>
        </h3>
        <p>
          The [=MiniApp manifest's=] <dfn><code>window</code></dfn> member contains a <a>MiniApp window resource</a> [=object=] to describe the look and feel of the MiniApp frame, including the styles of the status bar, navigation bar, title, background colors, among other visual configuration elements.
        </p>
        <p>
            The <a><code>window</code></a> object members inherit the text direction and language configuration from the <a><code>dir</code></a> and <a><code>lang</code></a> members at the root of the [=MiniApp manifest=].
        </p>
      </section>
    </section>
  </section> 

  <section id="sec-permission-resource-members">
    <h2>MiniApp permission resource members</h2>
    <p>
      A <dfn data-lt="permission resource|MiniApp permission resources|MiniApp permission resource's">MiniApp permission resource</dfn> is an [=object=] that describes a request for using a concrete system feature (e.g., access to device's location, user contacts, sensors, and camera) required for the proper execution of a MiniApp.
    </p>
    <p>
      The following members are defined under the scope of the [=MiniApp manifest=], addressing specific aspects of a [=permission resource=].
    </p>
    <section>
      <h3><code>name</code> member</h3>
      <p>
        The [=MiniApp permission resource's=] <dfn data-dfn-for="MiniApp permission resource"><code>name</code></dfn> member is a [=string=] that indicates the name of the feature requested.</span>
      </p>
    </section>
    <section>
      <h3><code>reason</code> member</h3>
      <p>
        The optional [=MiniApp permission resource's=] <dfn><code>reason</code></dfn> member is a [=string=] that indicates the reason given to request the feature specified in the <a data-link-type="dfn" data-link-for="MiniApp permission resource"><code>name</code></a> attribute.</span>
      </p>
      <div class="ednote">
        To add example
      </div>
    </section>
  </section>

  <section id="sec-widget-resource-members">
    <h2>MiniApp widget resource members</h2>
    <p>
      A <dfn data-lt="widget resources|MiniApp widget resources|MiniApp widget resource's">MiniApp widget resource</dfn> is an [=object=] that defines and configures a widget that is part of a MiniApp.
    </p>
    <p>
      The following members are defined under the scope of the [=MiniApp manifest=], addressing specific aspects of a [=widget resource=].
    </p>      
    <section>
      <h2><code>name</code> member</h2>
      <p>
        The [=MiniApp widget resource's=] <dfn data-dfn-for="MiniApp widget resource"><code>name</code></dfn> member is a [=string=] that indicates the title of a Widget.
      </p>
    </section>
    <section>
      <h3><code>path</code> member</h3>
      <p>
        The [=MiniApp widget resource's=] <dfn>path</dfn> member is a [=relative-url string=] that defines the corresponding  [=page route=] of a widget, represented as in the <a><code>pages</code></a> array.
      </p>
    </section>
    <section>
      <h3><code>min_platform_version</code> member</h3>
      <p>
        The optional [=MiniApp widget resource's=] <dfn data-dfn-for="MiniApp widget resource"><code>min_platform_version</code></dfn> member indicates the minimum platform version supported for a MiniApp widget.
      </p>
      <div class="note" title='Usage'>
        <p>
          Since Widget APIs and MiniApp APIs may differ, the declaration of the minimum version of the platform may be different. Thus, if the widgets member omits <a data-link-for="MiniApp widget resource" data-link-type="dfn"><code>min_platform_version</code></a> explicitly, the user agent will consider the same requirement as the specified in the <a data-link-for="MiniApp manifest" data-link-type="dfn"><code>min_platform_version</code></a> member at the root of the [=manifest=].
        </p>
      </div>
    </section>
  </section>

  <section id="sec-window-resource-members">
    <h2>MiniApp window resource members</h2>
    <p>
      A <dfn data-lt="window resource|MiniApp window resources|MiniApp window resource's">MiniApp window resource</dfn> is an [=object=] that defines and configures the window that contains a MiniApp.
    </p>
    <p>
      The following members are defined under the scope of the [=MiniApp manifest=], enabling the description of the MiniApp [=window resource=].
    </p>
    <section>
      <h3><code>auto_design_width</code> member</h3>
      <p>
        The <dfn><code>auto_design_width</code></dfn> member is a [=boolean=] that indicates whether the <a><code>design_width</code></a> of the page is auto-calculated by the user agent. When <a><code>auto_design_width</code></a> is <code>true</code>, the value of <a><code>design_width</code></a> is ignored. In this case, the system's baseline width is automatically determined according to the pixel density of the screen.
      </p>
      <p class="note" title='Usage'>
        Value by default: <code>false</code>.
      </p>
    </section>
    <section data-cite="CSS-COLOR-4 CSS-SYNTAX-3 APPMANIFEST">
      <h3><code>background_color</code> member</h3>
      <p>
        The <dfn data-dfn-for="MiniApp window resource"><code>background_color</code></dfn> member is a [=string=] that specifies the background color of the window that contains a MiniApp.
      </p>
      <div class="note" title='Usage'>
        <p>
          This member supports [=sRGB=] colors, and it is equivalent to the application manifest's <a href="https://www.w3.org/TR/appmanifest/#dfn-background_color" data-link-type="dfn"><code>background_color</code></a>.
        </p>
        <p>
          Value by default: <code>"#ffffff"</code>.
        </p>
      </div>
    </section>
    <section data-cite="CSS-COLOR-4 MEDIAQUERIES">
      <h3><code>background_text_style</code> member</h3>
      <p>
        <span>The <dfn><code>background_text_style</code></dfn> member is a [=string=] that specifies the background text style, indicating a light or dark color theme.</span>
      </p>
      <div class="note" title='Usage'>
        <p>
          This member supports <a data-xref-type="css-descriptor" data-xref-for="@media">prefers-color-scheme</a> with the <code>"light"</code> or <code>"dark"</code> values.
        </p>
        <p>
          Value by default: <code>"dark"</code>.
        </p>
      </div>
    </section>
    <section>
      <h3><code>design_width</code> member</h3>
      <p>
        The <dfn><code>design_width</code></dfn> member is a [=number=] that indicates the baseline width of the page design in <a data-cite="css-values">pixel unit</a>. It is  used for visually adjusting the page components.
      </p>
      <div class="note" title='Usage'>
        <p>
          The value is a non-negative integer.
        </p>           
        <p>
          Value by default: <code>750</code>.
        </p>
      </div>
    </section>
    <section>
      <h3><code>enable_pull_down_refresh</code> member</h3>
      <p>
        The <dfn><code>enable_pull_down_refresh</code></dfn> member is a [=boolean=] that specifies if the <code>pull-to-refresh</code> event is enabled during the interaction with the MiniApp.
      </p>
      <p class="note" title='Usage'>
        Value by default: <code>false</code>.
      </p>
    </section>    
    <section>
      <h3><code>fullscreen</code> member</h3>
      <p>
        The <dfn><code>fullscreen</code></dfn> member is a [=boolean=] that indicates if the MiniApp is shown in full-screen display mode.
      </p>
      <div class="note" title='Usage'>
        <p>When this member takes the <code>true</code> value, it is equivalent to the <a href="https://www.w3.org/TR/appmanifest/#dfn-fullscreen" data-link-type="dfn"><code>fullscreen</code> value on the application manifest's <a href="https://www.w3.org/TR/appmanifest/#dfn-display" data-link-type="dfn"><code>display</code></a> member. When it takes <code>false</code> as value, it is equivalent to <a href="https://www.w3.org/TR/appmanifest/#dfn-minimal-ui" data-link-type="dfn"><code>minimal-ui</code></a>.
      </p>
        <p>
          Value by default: <code>false</code>.
        </p>
      </div>
    </section>
    <section data-cite="CSS-COLOR-4 CSS-SYNTAX-3">
      <h3><code>navigation_bar_background_color</code> member</h3>
      <p>
        <span>The <dfn><code>navigation_bar_background_color</code></dfn> member is a [=string=] that specifies the color of the background of the navigation bar of the MiniApp.</span>
      </p>
      <div class="note" title='Usage'>
        <p>This member supports [=sRGB=] colors.</p>
        <p>Value by default: <code>"#000000"</code>.</p>
      </div>
    </section>
    <section>
      <h3><code>navigation_bar_text_style</code> member</h3>
      <p>
        <span>The <dfn><code>navigation_bar_text_style</code></dfn> member is a [=string=] that indicates the text color of the navigation bar title.</span>
      </p>
      <p>
        This member MUST contain one of the following values: 
      </p>
      <dl>
        <dt><dfn><code>"white"</code></dfn></dt>
        <dd>For white text color.</dd>
        <dt><dfn><code>"black"</code></dfn></dt>
        <dd>For black text color.</dd>
      </dl>
      <p class="note" title='Usage'>
       Value by default: <a><code>"white"</code></a>.
      </p>
    </section>
    <section>
      <h3><code>navigation_bar_title_text</code> member</h3>
      <p>
        The <dfn><code>navigation_bar_title_text</code></dfn> member is a [=string=] that specifies the title of the navigation bar of the MiniApp.
      </p>
    </section>
    <section>
      <h3><code>navigation_style</code> member</h3>
      <p>
        The <dfn><code>navigation_style</code></dfn> member is a [=string=] that specifies the style of the navigation bar.
      </p>
      <p>
        This member MUST contain one of the following values: 
      </p>
      <dl>
        <dt><dfn><code>"default"</code></dfn></dt>
        <dd>For applying the style by default.</dd>
        <dt><dfn><code>"custom"</code></dfn></dt>
        <dd>For applying a customized navigation bar.</dd>
      </dl>       
      <div class="note" title='Usage'>
        <p>
          The capsule button at the right corner is not customizable.
        </p>
        <p>
          Value by default: <a><code>"default"</code></a>.
        </p>
      </div>
    </section>
    <section>
      <h3><code>on_reach_bottom_distance</code> member</h3>
      <p>
        The <dfn><code>on_reach_bottom_distance</code></dfn> member is a [=number=] that defines the vertical offset from the bottom of the window required to trigger a page pull-up event. Values for this member are non-negative integers expressed in <a data-cite="css-values">pixel unit</a>.
      </p>
      <p class="note">
        <span>
          Value by default: <code>50</code>.
        </span>
      </p>
    </section>
    <section>
      <h3><code>orientation</code> member</h3>
      <p>
        The <dfn><code>orientation</code></dfn> member is a [=string=] that specifies the configuration of the screen orientation for the MiniApp. 
      </p>
      <p>
        This member supports the values: <code>"portrait"</code> and <code>"landscape"</code> defined in {{OrientationLockType}} [[SCREEN-ORIENTATION]].
      </P>
      <div class="note" title='Usage'>
        <p>
          This member is equivalent to the application manifest's <a href="https://www.w3.org/TR/appmanifest/#dfn-orientation" data-link-type="dfn"><code>orientation</code></a>.
        </p>
        <p>
          Value by default: <code>"portrait"</code>.
        </p>
      </div>
      <div class="issue" data-number="8"></div>
    </section>
  </section>

  <section id="sec-localizable-members">
    <h2>Localizable members</h2>
    <p>
        A <dfn data-lt="localizable members">localizable member</dfn> is a [=manifest=] member whose content may be adapted to specific linguistic, geographical, and cultural aspects. These localizable members share the <a href="https://w3c.github.io/manifest/#dfn-language-tag" data-link-type="dfn">language tag</a> (<a><code>lang</code></a>) and display direction (<a><code>dir</code></a>) defined at manifest's root.
    </p>
    <p>
      The following members are [=localizable members=]:
    </p>
    <ul>
        <li><a data-link-for="MiniApp manifest" data-link-type="dfn"><code>name</code></a></li>
        <li><a><code>short_name</code></a></li>
        <li><a><code>description</code></a></li>
        <li>[=MiniApp window resource's=] <a><code>navigation_bar_title_text</code></a></li>
        <li>[=MiniApp widget resource's=] <a data-link-for="MiniApp widget resource" data-link-type="dfn"><code>name</code></a></li>
    </ul>
  </section>

  <section>
    <h2>Dependencies</h2>
    <p>
      As a crucial part of a MiniApp package, the <code>manifest.json</code> file describes several important aspects of the MiniApp by referring to the MiniApp package resources in different file types, such as the page scripts and visual configuration files in the <code>pages</code> directory and the images in the <code>common</code> directory. Details are specified in [[MINIAPP-PACKAGING=].
    </p>
    <p>
      The regular operation of a MiniApp relies on the proper configuration in the [=manifest=] and the MiniApp package availability of resources. Such dependency needs to be checked during both the development phase and deployment phase.
    </p>
  </section>

  <section>
    <h2>Security and Privacy Considerations</h2>
    <section>
        <h2>Content constraint</h2>
        <p>
            As the manifest is a JSON document and will commonly be encoded using [[UNICODE]], the security considerations described in [[JSON] and [[UNICODE-SECURITY]] apply. In order to prevent developers from including custom/unrestrained data in a manifest, implementors may use a more strict schema than that defined in <a href="#sec-json-schema">JSON Schema</a> to impose their implementation-specific limits on the member names, types, and value ranges (e.g., to guard against memory overflow, or to meet platform-specific limitations).
        </p>
    </section>

    <section>
        <h2>Local resource access</h2>
        <p>
          Members like <a><code>icons</code></a>, <a><code>pages</code></a>, and <a><code>widgets</code></a> contain paths referring to local resources on the hosting platform. Implementors and the hosting platform should check the validity of those paths to prevent illegal access out of the scope of the <a data-link-type="dfn" href="https://w3c.github.io/miniapp-packaging/#dfn-package">MiniApp Package</a>. On the other hand, the MiniApp itself (e.g., using scripting code) may provide mechanisms to access external resources either on the hosting platform or on remote websites (e.g., through a URI). In this case, the hosting platform is responsible for providing a clear indication to an end-user about such a context switch.
        </p>
	      <p>
         Additionally, the <a><code>req_permissions</code></a> member provides a specific means to control the access the local software, hardware, and data resources on the user's device. User's consent should be asked when it comes to privacy-related or high-level privileged resources.
        </p>
    </section>

    <section>
        <h2>Integrity</h2>
        <p> The integrity of the manifest document is protected by a cryptographic hash mechanism as part of the whole <a data-link-type="dfn" href="https://w3c.github.io/miniapp-packaging/#dfn-package">MiniApp Package</a>, as detailed in [[MINIAPP-PACKAGING]]. </p>
    </section>

    <section>
        <h2>Transparency</h2>
        <p>
          The user agent SHOULD provide the end-user with transparent metadata about a MiniApp (i.e., <a><code>app_id</code></a>, <a data-link-for="MiniApp manifest" data-link-type="dfn"><code>name</code></a>, <a><code>short_name</code></a>, <a>icons</a>, <a><code>version_name</code></a>, <a><code>description</code></a>), offering users enough information, allowing them to make a conscious decision about its usage. This practice could also help to identify spoofing MiniApps.
        </p>
    </section>
</section>

  <section class="appendix" id="conformance">
    <p>
      This specification uses the Augmented Backus-Naur Form (ABNF) notation of [[!RFC5234]].
    </p>
  </section>


<section>
    <h2 id="sec-json-schema">
        <span>JSON Schema</span>
    </h2>
    <p>
      Developers interested in validating the MiniApp manifest document can use the JSON Schema defined at <a href="https://w3c.github.io/miniapp-manifest/manifest_schema.json">https://w3c.github.io/miniapp-manifest/manifest_schema.json</a>.
    </p>
</section>

  <section class='informative'>
    <h2>Example</h2>
    <pre class="example json">
      {
        "dir": "ltr",
        "lang": "en-US",
        "app_id": "org.example.miniapp",
        "name": "MiniApp Demo",
        "short_name": "MiniApp",
        "version_name": "1.0.0",
        "version_code": 1,
        "description": "A Simple MiniApp Demo",
        "icons": [
          {
            "src": "common/icons/icon.png",
            "sizes": "48x48"
          }
        ],
        "min_platform_version": "1.0.0",
        "pages": [
          "pages/index/index",
          "pages/detail/detail"
        ],
        "window": {
          "navigation_bar_text_style": "black",
          "navigation_bar_title_text": "Demo",
          "navigation_bar_background_color": "#f8f8f8",
          "background_color": "#ffffff",
          "fullscreen": false
        },
        "widgets": [
          {
            "name": "widget",
            "path": "widgets/index/index",
            "min_platform_version": "1.0.0"
          }
        ],
        "req_permissions": [
          {
            "name": "system.permission.LOCATION",
            "reason": "To show user's position on the map"
          },
          {
            "name": "system.permission.CAMERA",
            "reason": "To scan a QR code"
          }
        ]
      }
    </pre>
  </section>

  <section class="appendix">
    <h2>Acknowledgements</h2>
    <p>
      This document refers to <a href="https://www.w3.org/TR/appmanifest">W3C Web App Manifest</a>, <a href="https://smartprogram.baidu.com/docs/develop/tutorial/process/">Baidu MiniApp</a>, <a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html">WeChat MiniApp</a>, <a href="https://opendocs.alipay.com/mini/framework/app-json">Alipay MiniApp</a>, <a href="https://developer.toutiao.com/dev/cn/mini-app/develop/framework/basic-reference/general-configuration">ByteDance MiniApp</a>, <a href="https://doc.quickapp.cn/framework/manifest.html">Quick App Specification</a>, <a href="https://w3c.github.io/miniapp-widget/req/">MiniApp Widget Requirements</a>, <a href="https://w3c.github.io/miniapp-lifecycle/">MiniApp Lifecycle Specification</a>, <a href="https://w3c.github.io/miniapp-addressing/">MiniApp Addressing</a>, and <a href="https://semver.org/">Semantic Versioning</a>.
    </p>
  </section>

  <section class="appendix informative">
    <h2>
      <span>Extensibility</span>
    </h2>
    <p>
      This specification is based on the Web App Manifest <a href="https://www.w3.org/TR/appmanifest/#extensibility">extensibility principle</a>. 
    </p>
    <p>
      Although proprietary extensions are undesirable, they may be included as a manifest extension. In this case, it is RECOMMENDED to use vendor prefixes for the new members.
    </p>
    <p>
      We encourage implementors to add proprietary extensions to the Extensions Registry. This allows the community to track what extensions vendors and/or the web community have defined and documented.
    </p>
    <p class="issue" data-number="9">
    </p>
    <p>
      The following is an example of three hypothetical vendor extensions.
    </p>
    <pre class="example json" title="Proprietary extensions">
      {
        ...
        "wechat_new_feature": "foo",
        "ali_new_url_system": "http://example.org",
        "coolminiapp_menu_color": "#FA0000"
        ...
      }
    </pre>
  </section>
</body>
</html>
